angular.module("sfObibaSimpleMdeTemplates",[]).run(["$templateCache",function(e){e.put("src/templates/sf-obiba-simple-mde.html",'<div class="form-group"\n     ng-controller="SimpleMdeController"\n     ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess(), \'has-feedback\': form.feedback !== false }"\n     schema-validate="form" sf-field-model >\n  <!--<pre>{{form|json}}</pre>-->\n  <label class="control-label" ng-show="showTitle()">{{form.title}}</label>\n  <div class="pull-right dropdown" ng-class="{\'open\': open}" ng-if="form.locales && form.locales.length > 1">\n    <a href class="dropdown-toggle badge" ng-click="toggleDropdown()">{{form.languages[selectedLocale]}} <span class="caret"></span></a>\n    <ul class="dropdown-menu">\n      <li ng-repeat="loc in form.locales"><a href ng-click="selectLocale(loc)">{{form.languages[loc]}}</a></li>\n    </ul>\n  </div>\n\n  <div ng-if="!form.readonly">\n    <obiba-simple-mde\n      ng-repeat="locale in form.locales"\n      ng-model-options="{ allowInvalid: true }"\n      sf-field-model="replaceAll"\n      text="$$value$$[locale]"\n      update="locale === selectedLocale"\n      readonly="form.readonly"\n      ng-if="locale === selectedLocale">\n    </obiba-simple-mde>\n  </div>\n\n  <textarea ng-if="form.readonly"\n            class="form-control"\n            ng-disabled="form.readonly"\n            rows="{{form.rows ? form.rows : 5}}"\n            sf-field-model="replaceAll"\n            ng-bind-html="render($$value$$, form.tablestyle)">\n  </textarea>\n\n  <span class="help-block" sf-message="form.description"></span>\n</div>\n')}]),angular.module("sfObibaSimpleMde",["schemaForm","sfObibaSimpleMdeTemplates","ngObiba"]).config(["schemaFormProvider","schemaFormDecoratorsProvider","sfBuilderProvider","sfPathProvider",function(e,l,o,a){var n=function(l,o,n){if("object"===o.type&&"obibaSimpleMde"===o.format){var r=e.stdFormObj(l,o,n);return r.key=n.path,r.type="obibaSimpleMde",r.languages||(r.languages={en:"English"}),r.locales=Object.keys(r.languages),r.validationMessage=n.global.validationMessage||{},r.validationMessage.completed=r.validationMessage.completed||"The field must be completed in all specified languages",r.$validators={completed:function(e){return!(r.required&&e&&Object.keys(e).length>0)||Object.keys(e).filter(function(l){return r.locales.indexOf(l)>-1&&e[l]&&""!==e[l]}).length===r.locales.length}},n.lookup[a.stringify(n.path)]=r,r}};e.defaults.object.unshift(n),l.defineAddOn("bootstrapDecorator","obibaSimpleMde","src/templates/sf-obiba-simple-mde.html",o.stdBuilders)}]).controller("SimpleMdeController",["$scope","$rootScope","marked",function(e,l,o){e.$watch("ngModel.$modelValue",function(){e.ngModel.$validate?(e.ngModel.$validate(),e.ngModel.$invalid&&(e.ngModel.$dirty=!0,e.ngModel.$pristine=!1)):e.ngModel.$setViewValue(ngModel.$viewValue)},!0),e.$watch("form",function(){e.form.disableErrorState=e.form.hasOwnProperty("readonly")&&e.form.readonly,e.selectedLocale=e.form.locales&&e.form.locales.length>0?l.sfSelectedLocale?l.sfSelectedLocale:e.form.locales[0]:""}),e.selectLocale=function(o){l.$broadcast("sfLocalizedStringLocaleChanged",o),e.open=!1},e.toggleDropdown=function(){e.open=!e.open},e.$on("sfLocalizedStringLocaleChanged",function(o,a){e.selectedLocale=a,l.sfSelectedLocale=a}),e.onTextChange=function(e){},e.render=function(l,a){if(l&&l[e.selectedLocale]){var n=o(l[e.selectedLocale]),r=a?a:"table table-striped table-bordered";return n.split("<table>").join('<table class="'+r+'">')}return""},e.open=!1}]);